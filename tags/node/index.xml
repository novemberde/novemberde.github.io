<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>Node on Novemberde&#39;s Blog</title>
    <link>https://novemberde.github.io/tags/node/</link>
    <description>Recent content in Node on Novemberde&#39;s Blog</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>ko-KR</language>
    <lastBuildDate>Sun, 31 Dec 2017 11:30:03 +0000</lastBuildDate><atom:link href="https://novemberde.github.io/tags/node/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Serverless &#43; AWS Lambda &#43; AWS CloudWatch &#43; Slack 를 활용한  Web crawler 만들기</title>
      <link>https://novemberde.github.io/post/2017/12/31/Node-crawler/</link>
      <pubDate>Sun, 31 Dec 2017 11:30:03 +0000</pubDate>
      
      <guid>https://novemberde.github.io/post/2017/12/31/Node-crawler/</guid>
      <description>&lt;h2 id=&#34;summary&#34;&gt;Summary&lt;/h2&gt;
&lt;hr&gt;
&lt;p&gt;우리는 매일 각 웹사이트를 확인하여 뉴스를 취합한다. 별다른 요구사항 없이 직접 업무를 진행하시지만 이건 자동화해야된다는 생각이 들었다.
하루에 한 번 이뤄지는 일이니 주기적으로 슬랙에 최신 뉴스를 보내도록 자동화한다면 업무의 작은 시간도 아낄 수 있을 것이다.
그래서 이번에 크롤링 자동화 방법에 대해서 정리하려고 한다.&lt;/p&gt;
&lt;p&gt;Serverless framework를 활용하면 빠른 배포 및 관리가 가능하니 기술 스택을 다음과 같이 정했다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;AWS Lambda: javascript로 작성. got, cheerio를 사용하여 crawler 설계
&lt;ul&gt;
&lt;li&gt;got: Request 모듈. 우리나라에는 많이 알려져있지 않지만 해외에서는 주로 got을 사용. npm에서 download 수가 압도적으로 많다. 사용법이 간단하다.&lt;/li&gt;
&lt;li&gt;cheerio: jQuery형식으로 서버에서 사용하는 모듈&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;AWS CloudWatch: 주기적으로 Lambda 함수를 실행하기 위함&lt;/li&gt;
&lt;li&gt;Serverless framework: 내부적으로 Serverless Application Model 파일을 생성하여 CloudFormation으로 배포하는 것을 자동화&lt;/li&gt;
&lt;li&gt;Slack bot: 정해진 시간이 지나고 다시 뉴스정보를 불러오고 싶을 때 사용한다. Lambda를 trigger하는 방법으로 사용&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;개발-환경-설정&#34;&gt;개발 환경 설정&lt;/h2&gt;
&lt;hr&gt;
&lt;p&gt;이 과정은 npm version 5 이상을 사용하고 있다고 가정하고 시작한다.
만일 사용하고 있지 않다면 npm install -g npx 를 실행한다.
npx는 해당 패키지 내에서 node_modules/.bin에 있는 명령어를 바로 사용할 수 있게 해준다.&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Node js 라이브러리 및 유용한 자료</title>
      <link>https://novemberde.github.io/post/2017/11/05/Node.JS_Library/</link>
      <pubDate>Sun, 05 Nov 2017 11:30:03 +0000</pubDate>
      
      <guid>https://novemberde.github.io/post/2017/11/05/Node.JS_Library/</guid>
      <description>&lt;h2 id=&#34;summary&#34;&gt;Summary&lt;/h2&gt;
&lt;hr&gt;
&lt;p&gt;Node JS의 라이브러리가 워낙 많다보니 자주쓰는 라이브러리를 정리해야될 필요성을 느꼈다.&lt;/p&gt;
&lt;p&gt;그리고 재밌는 라이브러리를 리스트로 관리하지 않다보니 잊게 되었다.&lt;/p&gt;
&lt;p&gt;발견할 때마다 정리하고 라이브러리의 용도에 맞게 분류하여 나중에 필요할 경우 바로 사용할 수 있도록 한다.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;자주-쓰는-패키지&#34;&gt;자주 쓰는 패키지&lt;/h2&gt;
&lt;hr&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;JavaScript utility library&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://underscorejs.org/&#34;&gt;underscore&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://lodash.com/&#34;&gt;lodash&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Year, month, date, time&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://momentjs.com/&#34;&gt;moment.js&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;MarkDown&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://highlightjs.org/&#34;&gt;highlight.js&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://prismjs.com/&#34;&gt;prismjs&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Ajax&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.npmjs.com/package/request&#34;&gt;request&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.npmjs.com/package/request-promise&#34;&gt;request-promise&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.npmjs.com/package/superagent&#34;&gt;superagent&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.npmjs.com/package/axios&#34;&gt;axios&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.npmjs.com/package/got&#34;&gt;got&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Test&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.npmjs.com/package/mocha&#34;&gt;mocha&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.npmjs.com/package/supertest&#34;&gt;supertest&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.npmjs.com/package/chai&#34;&gt;chai&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.npmjs.com/package/should&#34;&gt;should&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.npmjs.com/package/enzyme&#34;&gt;enzyme&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Logger&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.npmjs.com/package/morgan&#34;&gt;morgan&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Task Runner &amp;amp; Bundler&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://gulpjs.com/&#34;&gt;gulp&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://gruntjs.com/&#34;&gt;grunt&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://webpack.github.io/&#34;&gt;webpack&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/FormidableLabs/webpack-dashboard&#34;&gt;webpack-dashboard&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Database&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>TypeScript로 Node.js Express 서버 개발하기</title>
      <link>https://novemberde.github.io/post/2017/10/22/Express-Typescript/</link>
      <pubDate>Sun, 22 Oct 2017 13:30:03 +0000</pubDate>
      
      <guid>https://novemberde.github.io/post/2017/10/22/Express-Typescript/</guid>
      <description>&lt;h2 id=&#34;summary&#34;&gt;Summary&lt;/h2&gt;
&lt;hr&gt;
&lt;p&gt;최근에 직방의 AWS Lambda 코드를 세미나에서 스쳐지나가는 것을 보았다.
TypeScript로 짜여져 있었고 나중에 지속적인 프로젝트 관리적인 이점이 있을 것으로 생각이 되기 때문에 TypeScript로 프로젝트를 구성해보는 것을 정리해보기로 결심했다.&lt;/p&gt;
&lt;h2 id=&#34;nodejs-프로젝트-생성하기&#34;&gt;node.js 프로젝트 생성하기&lt;/h2&gt;
&lt;hr&gt;
&lt;p&gt;먼저 프로젝트를 생성한다. 기존에 npm과 nodejs가 설치되어 있다는 전제하에 시작한다.&lt;/p&gt;
&lt;p&gt;만약 설치되어 있지 않다면 다음의 링크를 참고한다. &lt;a href=&#34;https://nodejs.org/ko/download/package-manager/&#34;&gt;https://nodejs.org/ko/download/package-manager/&lt;/a&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ mkdir node_typescript
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ npm init -y
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;그리고 편의를 위해 사전에 설치되어 있어야 하는 패키지들이 있다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;npx: global로 패키지를 설치하지 않더라도 프로젝트 내에서 사용할 수 있게 해준다.&lt;/li&gt;
&lt;li&gt;nodemon: 파일이 변화될 때마다 재실행해준다.&lt;/li&gt;
&lt;li&gt;typescript: typescript로 구성한 코드를 javascript로 트랜스파일링 해준다.&lt;/li&gt;
&lt;li&gt;npm-run-all: 여러 npm 실행 명령을 병렬로 실행할 수 있게 해준다.&lt;/li&gt;
&lt;li&gt;webpack: 요즘 각광받는 모듈 번들러&lt;/li&gt;
&lt;li&gt;webpack-cli: webpack 명령을 사용하기 위한 CLI도구&lt;/li&gt;
&lt;li&gt;source-map-support: typescript로 개발시 source-map을 지원해준다.&lt;/li&gt;
&lt;li&gt;@types/express: express 모듈에 대한 type을 지원해준다.&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ npm install -g npx
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ npm install --save-dev typescript ts-loader npm-run-all webpack @types/express nodemon webpack-cli
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ npm install --save express source-map-support
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;기본-설정하기&#34;&gt;기본 설정하기&lt;/h2&gt;
&lt;hr&gt;
&lt;p&gt;다음과 같이 typescript에 대한 기본 설정을 한다.&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Node 서버를 바탕으로 Dockerfile로 만들기</title>
      <link>https://novemberde.github.io/post/2017/04/02/Docker_7/</link>
      <pubDate>Sun, 02 Apr 2017 11:30:03 +0000</pubDate>
      
      <guid>https://novemberde.github.io/post/2017/04/02/Docker_7/</guid>
      <description>&lt;h2 id=&#34;summary&#34;&gt;Summary&lt;/h2&gt;
&lt;hr&gt;
&lt;p&gt;Dockerfile로 이미지로 관리하면 배포 및 관리가 간편하게 가능하다.
여기서는 node를 베이스 이미지로하여 노드 서버를 배포할 수 있도록 준비한다.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;순서&#34;&gt;순서&lt;/h2&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li&gt;Amazon web service에 Ubuntu OS를 사용하는 EC2 인스턴스 생성하기&lt;/li&gt;
&lt;li&gt;접속 포트를 열어주고 별도의 Ubuntu 유저를 생성하기&lt;/li&gt;
&lt;li&gt;EC2에 Docker를 설치하고 Ubuntu 유저에게 권한주기&lt;/li&gt;
&lt;li&gt;Bitbucket을 사용하여 git repository 생성하기&lt;/li&gt;
&lt;li&gt;Express JS를 사용하여 Node 서버 구축하기&lt;/li&gt;
&lt;li&gt;PM2를 사용하여 EC2에 Node 서버 배포하기&lt;/li&gt;
&lt;li&gt;Node 서버를 바탕으로 Dockerfile로 만들기&lt;/li&gt;
&lt;li&gt;Docker Hub의 automated build를 사용하여 Docker image를 만들기&lt;/li&gt;
&lt;li&gt;만들어진 Docker image를 EC2 인스턴스에 배포하기&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h2 id=&#34;dockerfile-이란&#34;&gt;Dockerfile 이란?&lt;/h2&gt;
&lt;hr&gt;
&lt;p&gt;Docker image의 설정 정보를 담고 있는 파일이다.
실제 운영 소프트웨어를 배포할 경우 node 베이스 이미지를 올린 다음 패키지를 설치하고 volume을 할당할 수도 있다.
현재 이미지를 주기적으로 commit하여 백업하고 직접 docker exec를 하여 컨테이너 내에 실행명령어를 보내야하는 단점이 있었다.
하지만 Dockerfile은 docker image를 생성할 때 source file을 가져와서 컨테이너 구동과 동시에 서버를 가동시킬 수 있다.
이러한 docker container를 관리하는 방법으로는 docker-compose가 있는데 추후에 살펴볼 것이다.&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Docker로 EC2에 Node 배포하기</title>
      <link>https://novemberde.github.io/post/2017/03/31/Docker_0/</link>
      <pubDate>Fri, 31 Mar 2017 11:30:03 +0000</pubDate>
      
      <guid>https://novemberde.github.io/post/2017/03/31/Docker_0/</guid>
      <description>&lt;h2 id=&#34;소개&#34;&gt;소개&lt;/h2&gt;
&lt;p&gt;Node JS 서버를 배포하려고 한다.
매일 같이 하던 방식이지만 방법을 잊을 수도 있다는 생각이 들었다.
이것을 보고 사람들이 노드 서버를 간결하게 배포하였으면 한다.&lt;/p&gt;
&lt;h2 id=&#34;순서&#34;&gt;순서&lt;/h2&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li&gt;Amazon web service에 Ubuntu OS를 사용하는 EC2 인스턴스 생성하기&lt;/li&gt;
&lt;li&gt;접속 포트를 열어주고 별도의 Ubuntu 유저를 생성하기&lt;/li&gt;
&lt;li&gt;EC2에 Docker를 설치하고 Ubuntu 유저에게 권한주기&lt;/li&gt;
&lt;li&gt;Bitbucket을 사용하여 git repository 생성하기&lt;/li&gt;
&lt;li&gt;Express JS를 사용하여 Node 서버 구축하기&lt;/li&gt;
&lt;li&gt;테스트로 PM2를 사용하여 EC2에 Node 서버 배포하기&lt;/li&gt;
&lt;li&gt;Node 서버를 바탕으로 Dockerfile로 만들기&lt;/li&gt;
&lt;li&gt;Docker Hub의 automated build를 사용하여 Docker image를 만들기&lt;/li&gt;
&lt;li&gt;만들어진 Docker image를 EC2 인스턴스에 배포하기&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;</description>
    </item>
    
  </channel>
</rss>

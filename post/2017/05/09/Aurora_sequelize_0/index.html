<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Amazon Aurora와 sequelize 연동해보기. | Novemberde's Blog</title><meta name=keywords content="aws,aurora,sequelize,nodejs,orm"><meta name=description content="Summary 최근에 글 중에서 aurora와 sequelize가 과연 연동이 가능할까라는 글을 본적이 있다. aurora는 MySQL과 호환이 가능한 DB라고 하기 때문에 나 또한 궁금증이 생겼다. 직접 aurora와 sequelize를 연동해보고, MySQL workbench로 aurora를 사용할 수 있는지까지 확인해보겠다.
Aurora instance 생성하기 이전까지 사용할 때는 MySQL이나 MariaDB위주로 사용했다. 스타트업은 라이센스 비용에 민감하기 때문에 Open Source를 주로 선택했기 때문이다.
또한 아래 리스트를 보면 RDS 이름에서 추측할 수 있듯이 RDS에서는 관계형 DB만 사용할 수 있는 것을 알 수 있다."><meta name=author content><link rel=canonical href=https://novemberde.github.io/post/2017/05/09/Aurora_sequelize_0/><link crossorigin=anonymous href=/assets/css/stylesheet.min.9f1d947375927e9847272b1f4e9be81336f539e513bf04d52cade31f81cad1af.css integrity="sha256-nx2Uc3WSfphHJysfTpvoEzb1OeUTvwTVLK3jH4HK0a8=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.e85ad0406048e8176e1c7661b25d5c69297ddfe41dc4124cf75ecb99a4f7b3d1.js integrity="sha256-6FrQQGBI6BduHHZhsl1caSl93+QdxBJM917LmaT3s9E=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://novemberde.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://novemberde.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://novemberde.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://novemberde.github.io/apple-touch-icon.png><link rel=mask-icon href=https://novemberde.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.101.0"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:#1d1e20;--entry:#2e2e33;--primary:rgba(255, 255, 255, 0.84);--secondary:rgba(255, 255, 255, 0.56);--tertiary:rgba(255, 255, 255, 0.16);--content:rgba(255, 255, 255, 0.74);--hljs-bg:#2e2e33;--code-bg:#37383e;--border:#333}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-97433460-1","auto"),ga("send","pageview"))</script><meta property="og:title" content="Amazon Aurora와 sequelize 연동해보기."><meta property="og:description" content="Summary 최근에 글 중에서 aurora와 sequelize가 과연 연동이 가능할까라는 글을 본적이 있다. aurora는 MySQL과 호환이 가능한 DB라고 하기 때문에 나 또한 궁금증이 생겼다. 직접 aurora와 sequelize를 연동해보고, MySQL workbench로 aurora를 사용할 수 있는지까지 확인해보겠다.
Aurora instance 생성하기 이전까지 사용할 때는 MySQL이나 MariaDB위주로 사용했다. 스타트업은 라이센스 비용에 민감하기 때문에 Open Source를 주로 선택했기 때문이다.
또한 아래 리스트를 보면 RDS 이름에서 추측할 수 있듯이 RDS에서는 관계형 DB만 사용할 수 있는 것을 알 수 있다."><meta property="og:type" content="article"><meta property="og:url" content="https://novemberde.github.io/post/2017/05/09/Aurora_sequelize_0/"><meta property="article:section" content="post"><meta property="article:published_time" content="2017-05-09T11:30:03+00:00"><meta property="article:modified_time" content="2017-05-09T11:30:03+00:00"><meta property="og:site_name" content="Novemberde dev logs"><meta name=twitter:card content="summary"><meta name=twitter:title content="Amazon Aurora와 sequelize 연동해보기."><meta name=twitter:description content="Summary 최근에 글 중에서 aurora와 sequelize가 과연 연동이 가능할까라는 글을 본적이 있다. aurora는 MySQL과 호환이 가능한 DB라고 하기 때문에 나 또한 궁금증이 생겼다. 직접 aurora와 sequelize를 연동해보고, MySQL workbench로 aurora를 사용할 수 있는지까지 확인해보겠다.
Aurora instance 생성하기 이전까지 사용할 때는 MySQL이나 MariaDB위주로 사용했다. 스타트업은 라이센스 비용에 민감하기 때문에 Open Source를 주로 선택했기 때문이다.
또한 아래 리스트를 보면 RDS 이름에서 추측할 수 있듯이 RDS에서는 관계형 DB만 사용할 수 있는 것을 알 수 있다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://novemberde.github.io/post/"},{"@type":"ListItem","position":2,"name":"Amazon Aurora와 sequelize 연동해보기.","item":"https://novemberde.github.io/post/2017/05/09/Aurora_sequelize_0/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Amazon Aurora와 sequelize 연동해보기.","name":"Amazon Aurora와 sequelize 연동해보기.","description":"Summary 최근에 글 중에서 aurora와 sequelize가 과연 연동이 가능할까라는 글을 본적이 있다. aurora는 MySQL과 호환이 가능한 DB라고 하기 때문에 나 또한 궁금증이 생겼다. 직접 aurora와 sequelize를 연동해보고, MySQL workbench로 aurora를 사용할 수 있는지까지 확인해보겠다.\nAurora instance 생성하기 이전까지 사용할 때는 MySQL이나 MariaDB위주로 사용했다. 스타트업은 라이센스 비용에 민감하기 때문에 Open Source를 주로 선택했기 때문이다.\n또한 아래 리스트를 보면 RDS 이름에서 추측할 수 있듯이 RDS에서는 관계형 DB만 사용할 수 있는 것을 알 수 있다.","keywords":["aws","aurora","sequelize","nodejs","orm"],"articleBody":"Summary 최근에 글 중에서 aurora와 sequelize가 과연 연동이 가능할까라는 글을 본적이 있다. aurora는 MySQL과 호환이 가능한 DB라고 하기 때문에 나 또한 궁금증이 생겼다. 직접 aurora와 sequelize를 연동해보고, MySQL workbench로 aurora를 사용할 수 있는지까지 확인해보겠다.\nAurora instance 생성하기 이전까지 사용할 때는 MySQL이나 MariaDB위주로 사용했다. 스타트업은 라이센스 비용에 민감하기 때문에 Open Source를 주로 선택했기 때문이다.\n또한 아래 리스트를 보면 RDS 이름에서 추측할 수 있듯이 RDS에서는 관계형 DB만 사용할 수 있는 것을 알 수 있다. 별도로 NoSQL을 사용하고 싶다면 AWS에서 지원하는 DynamoDB를 사용하거나 EC2에 DB를 올리는 방법이 있다.\n이제 다시 본론으로 돌아와서 아래와 같은 화면에서 aurora를 선택한다.\n특징을 살펴보면\nMySQL에 비해 5배의 처리 성능을 지님 15개의 레플리카를 만드는데 최고 10 ms 지연 64TB까지 오토스케일링 저장소가 여러 availability zone에 replicated 이와 같은 특징을 보면 별도로 MySQL에서 레플리카, 별도의 저장공간 확보나 클러스터링에 대해서 신경쓸 부분들이 확연히 줄어든다는 것을 알 수 있다.\nDB설정정보를 입력하자.\nDB Instance Identifier* 에는 DB를 구분할 값이다. 우리가 사용할 이름을 넣어주면된다. Multi_AZ Deployment는 여러 Zone에 Replica를 둠으로써 현재 DB가 올라가 있는 Zone에 이상이 발생하더라도 대처할 수 있게 해주는 고마운 도구다. Master Username* 에는 db의 마스터 계정 아이디라고 보면된다. Master Password* 에는 db의 마스터 계정 비밀번호를 입력하자. 테스트 환경이므로 여기서는 큰 설정을 하지 않는다.\nVPC Security Group에서 새로운 Security Group을 생성한다는 부분만 상기하고 넘어가자.\nSecurity Group에서 별도로 Port를 열어주지 않더라도 RDS인스턴스를 생성할 때 접속한 로컬의 IP주소로 3306포트가 열려있다.\n별도로 security group을 설정하지 않고 넘어가겠다.\n이제 Aurora DB가 생성되고 있음을 볼 수 있다.\nMySQL Workbench로 접속하기 MySQL workbench를 실행하고 새로운 connection을 test해보자.\n아래와 같은 화면으로 connection이 성공한 것을 볼 수 있다.\n이제 접속하여 SQL 쿼리를 사용하여 보자. MySQL과 동일한 쿼리가 동작하는 것을 볼 수 있다.\n-- 스키마 생성하기. CREATE SCHEMA `test` ; -- 테이블 생성하기. createdAt,updatedAt,deletedAt은 sequelize가 기본적으로 찾는 필드이다. 이를 제어하고 싶으면 별도의 설정이 필요하다. CREATE TABLE `test`.`user` ( `id` INT NOT NULL AUTO_INCREMENT, `name` VARCHAR(45) NOT NULL, `createdAt` DATETIME NULL, `updatedAt` DATETIME NULL, `deletedAt` DATETIME NULL, PRIMARY KEY (`id`)); 아래와 같은 테이블이 생성된 것을 볼 수 있다.\nSequelize로 사용하기 sequelize-auto를 사용해서 models를 뽑아오자.\nnpm으로 사전에 sequelize-auto와 mysql을 global로 설치해 놓아야 한다.\n# 기본 패키지 설치 $ npm install -g sequelize-auto mysql # models 뽑기 $ sequelize-auto -o \"./models\" -d test -h HOST -u USERNAME -p 3306 -x PASSWORD -e mysql 나온 models는 아래와 같다.\nmodule.exports = function(sequelize, DataTypes) { return sequelize.define('user', { id: { type: DataTypes.INTEGER(11), allowNull: false, primaryKey: true, autoIncrement: true }, name: { type: DataTypes.STRING(45), allowNull: false }, createdAt: { type: DataTypes.DATE, allowNull: true }, updatedAt: { type: DataTypes.DATE, allowNull: true }, deletedAt: { type: DataTypes.DATE, allowNull: true } }, { tableName: 'user' }); }; 마지막으로 Sequelize로 insert와 findAll을 해본다.\nconst models = require('./models'); models.user.create({name: \"KHBYUN\"}) .then( result =\u003e { console.log(result.dataValues); }) .catch( err =\u003e { console.error(err); }); models.user.findAll() .then( result =\u003e { console.log(result); }) .catch( err =\u003e { console.error(err); }); 이상없이 동작하는 것을 확인할 수 있다.\nAurora는 MySQL과 호환성이 있기 때문에 MySQL과 사용하듯 Sequelize를 적용하면 Aurora도 큰 무리없이 사용할 수 있을 것으로 예상된다.\n무엇보다 관리적인 이점을 Aurora가 가지고 있기 때문에 Aurora를 사용하는 면이 개발자에게 많은 수고로움을 덜어줄 것이다.\n","wordCount":"489","inLanguage":"en","datePublished":"2017-05-09T11:30:03Z","dateModified":"2017-05-09T11:30:03Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://novemberde.github.io/post/2017/05/09/Aurora_sequelize_0/"},"publisher":{"@type":"Organization","name":"Novemberde's Blog","logo":{"@type":"ImageObject","url":"https://novemberde.github.io/favicon.ico"}}}</script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8620431066400094" crossorigin=anonymous></script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://novemberde.github.io/ accesskey=h title="Novemberde's Blog (Alt + H)">Novemberde's Blog</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://novemberde.github.io/search title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://novemberde.github.io/post/ title=Post><span>Post</span></a></li><li><a href=https://novemberde.github.io/about title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://novemberde.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://novemberde.github.io/post/>Posts</a></div><h1 class=post-title>Amazon Aurora와 sequelize 연동해보기.</h1><div class=post-meta>May 9, 2017&nbsp;·&nbsp;3 min</div></header><div class=post-content><h2 id=summary>Summary<a hidden class=anchor aria-hidden=true href=#summary>#</a></h2><hr><p>최근에 글 중에서 aurora와 sequelize가 과연 연동이 가능할까라는 글을 본적이 있다.
aurora는 MySQL과 호환이 가능한 DB라고 하기 때문에 나 또한 궁금증이 생겼다.
직접 aurora와 sequelize를 연동해보고, MySQL workbench로 aurora를 사용할 수 있는지까지 확인해보겠다.</p><hr><h2 id=aurora-instance-생성하기>Aurora instance 생성하기<a hidden class=anchor aria-hidden=true href=#aurora-instance-생성하기>#</a></h2><hr><p>이전까지 사용할 때는 MySQL이나 MariaDB위주로 사용했다.
스타트업은 라이센스 비용에 민감하기 때문에 Open Source를 주로 선택했기 때문이다.</p><p>또한 아래 리스트를 보면 RDS 이름에서 추측할 수 있듯이 RDS에서는 관계형 DB만 사용할 수 있는 것을 알 수 있다.
별도로 NoSQL을 사용하고 싶다면 AWS에서 지원하는 DynamoDB를 사용하거나 EC2에 DB를 올리는 방법이 있다.</p><p>이제 다시 본론으로 돌아와서 아래와 같은 화면에서 aurora를 선택한다.</p><p>특징을 살펴보면</p><ul><li>MySQL에 비해 5배의 처리 성능을 지님</li><li>15개의 레플리카를 만드는데 최고 10 ms 지연</li><li>64TB까지 오토스케일링 저장소가 여러 availability zone에 replicated</li></ul><p>이와 같은 특징을 보면 별도로 MySQL에서 레플리카, 별도의 저장공간 확보나 클러스터링에 대해서 신경쓸 부분들이 확연히 줄어든다는 것을 알 수 있다.</p><p><img loading=lazy src=/images/aws/rds/select_engine.png alt=select_engine></p><hr><p>DB설정정보를 입력하자.</p><ul><li>DB Instance Identifier* 에는 DB를 구분할 값이다. 우리가 사용할 이름을 넣어주면된다.</li><li>Multi_AZ Deployment는 여러 Zone에 Replica를 둠으로써 현재 DB가 올라가 있는 Zone에 이상이 발생하더라도 대처할 수 있게 해주는 고마운 도구다.</li><li>Master Username* 에는 db의 마스터 계정 아이디라고 보면된다.</li><li>Master Password* 에는 db의 마스터 계정 비밀번호를 입력하자.</li></ul><p><img loading=lazy src=/images/aws/rds/specify_db_details.png alt=specify_db_details></p><hr><p>테스트 환경이므로 여기서는 큰 설정을 하지 않는다.</p><p>VPC Security Group에서 새로운 Security Group을 생성한다는 부분만 상기하고 넘어가자.</p><p>Security Group에서 별도로 Port를 열어주지 않더라도 RDS인스턴스를 생성할 때 접속한 로컬의 IP주소로 3306포트가 열려있다.</p><p>별도로 security group을 설정하지 않고 넘어가겠다.</p><p><img loading=lazy src=/images/aws/rds/configure_advanced_setting.png alt=configure_advanced_setting></p><hr><p>이제 Aurora DB가 생성되고 있음을 볼 수 있다.</p><p><img loading=lazy src=/images/aws/rds/dashboard.png alt=dashboard></p><hr><h2 id=mysql-workbench로-접속하기>MySQL Workbench로 접속하기<a hidden class=anchor aria-hidden=true href=#mysql-workbench로-접속하기>#</a></h2><hr><p>MySQL workbench를 실행하고 새로운 connection을 test해보자.</p><p>아래와 같은 화면으로 connection이 성공한 것을 볼 수 있다.</p><p><img loading=lazy src=/images/aws/rds/mysql_workbench_test_connection.png alt=mysql_workbench_test_connection></p><hr><p>이제 접속하여 SQL 쿼리를 사용하여 보자.
MySQL과 동일한 쿼리가 동작하는 것을 볼 수 있다.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#75715e>-- 스키마 생성하기.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>SCHEMA</span> <span style=color:#f92672>`</span>test<span style=color:#f92672>`</span> ;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>-- 테이블 생성하기. createdAt,updatedAt,deletedAt은 sequelize가 기본적으로 찾는 필드이다. 이를 제어하고 싶으면 별도의 설정이 필요하다.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>TABLE</span> <span style=color:#f92672>`</span>test<span style=color:#f92672>`</span>.<span style=color:#f92672>`</span><span style=color:#66d9ef>user</span><span style=color:#f92672>`</span> (
</span></span><span style=display:flex><span>  <span style=color:#f92672>`</span>id<span style=color:#f92672>`</span> INT <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span> AUTO_INCREMENT,
</span></span><span style=display:flex><span>  <span style=color:#f92672>`</span>name<span style=color:#f92672>`</span> VARCHAR(<span style=color:#ae81ff>45</span>) <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>`</span>createdAt<span style=color:#f92672>`</span> DATETIME <span style=color:#66d9ef>NULL</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>`</span>updatedAt<span style=color:#f92672>`</span> DATETIME <span style=color:#66d9ef>NULL</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>`</span>deletedAt<span style=color:#f92672>`</span> DATETIME <span style=color:#66d9ef>NULL</span>,
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>PRIMARY</span> <span style=color:#66d9ef>KEY</span> (<span style=color:#f92672>`</span>id<span style=color:#f92672>`</span>));
</span></span></code></pre></div><p>아래와 같은 테이블이 생성된 것을 볼 수 있다.</p><p><img loading=lazy src=/images/aws/rds/new_table.png alt=new_table></p><hr><h2 id=sequelize로-사용하기>Sequelize로 사용하기<a hidden class=anchor aria-hidden=true href=#sequelize로-사용하기>#</a></h2><hr><p>sequelize-auto를 사용해서 models를 뽑아오자.</p><p>npm으로 사전에 sequelize-auto와 mysql을 global로 설치해 놓아야 한다.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 기본 패키지 설치</span>
</span></span><span style=display:flex><span>$ npm install -g sequelize-auto mysql
</span></span><span style=display:flex><span><span style=color:#75715e># models 뽑기</span>
</span></span><span style=display:flex><span>$ sequelize-auto -o <span style=color:#e6db74>&#34;./models&#34;</span> -d test -h HOST -u USERNAME -p <span style=color:#ae81ff>3306</span> -x PASSWORD -e mysql
</span></span></code></pre></div><p>나온 models는 아래와 같다.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>exports</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>sequelize</span>, <span style=color:#a6e22e>DataTypes</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>sequelize</span>.<span style=color:#a6e22e>define</span>(<span style=color:#e6db74>&#39;user&#39;</span>, {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>id</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>DataTypes</span>.<span style=color:#a6e22e>INTEGER</span>(<span style=color:#ae81ff>11</span>),
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>allowNull</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>primaryKey</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>autoIncrement</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>DataTypes</span>.<span style=color:#a6e22e>STRING</span>(<span style=color:#ae81ff>45</span>),
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>allowNull</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>createdAt</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>DataTypes</span>.<span style=color:#a6e22e>DATE</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>allowNull</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>updatedAt</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>DataTypes</span>.<span style=color:#a6e22e>DATE</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>allowNull</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>deletedAt</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>DataTypes</span>.<span style=color:#a6e22e>DATE</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>allowNull</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }, {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>tableName</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;user&#39;</span>
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><p>마지막으로 Sequelize로 insert와 findAll을 해본다.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>models</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;./models&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>models</span>.<span style=color:#a6e22e>user</span>.<span style=color:#a6e22e>create</span>({<span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;KHBYUN&#34;</span>})
</span></span><span style=display:flex><span>.<span style=color:#a6e22e>then</span>( <span style=color:#a6e22e>result</span> =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>result</span>.<span style=color:#a6e22e>dataValues</span>);
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span>.<span style=color:#66d9ef>catch</span>( <span style=color:#a6e22e>err</span> =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>error</span>(<span style=color:#a6e22e>err</span>);
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>models</span>.<span style=color:#a6e22e>user</span>.<span style=color:#a6e22e>findAll</span>()
</span></span><span style=display:flex><span>.<span style=color:#a6e22e>then</span>( <span style=color:#a6e22e>result</span> =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>result</span>);
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span>.<span style=color:#66d9ef>catch</span>( <span style=color:#a6e22e>err</span> =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>error</span>(<span style=color:#a6e22e>err</span>);
</span></span><span style=display:flex><span>});
</span></span></code></pre></div><hr><p>이상없이 동작하는 것을 확인할 수 있다.</p><p>Aurora는 MySQL과 호환성이 있기 때문에 MySQL과 사용하듯 Sequelize를 적용하면 Aurora도 큰 무리없이 사용할 수 있을 것으로 예상된다.</p><p>무엇보다 관리적인 이점을 Aurora가 가지고 있기 때문에 Aurora를 사용하는 면이 개발자에게 많은 수고로움을 덜어줄 것이다.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://novemberde.github.io/tags/AWS/>AWS</a></li><li><a href=https://novemberde.github.io/tags/aurora/>aurora</a></li><li><a href=https://novemberde.github.io/tags/sequelize/>sequelize</a></li><li><a href=https://novemberde.github.io/tags/nodejs/>nodejs</a></li><li><a href=https://novemberde.github.io/tags/orm/>orm</a></li></ul><nav class=paginav><a class=prev href=https://novemberde.github.io/post/2017/05/21/Javascript_policy/><span class=title>« Prev Page</span><br><span>Code convention과 개발자가 지켜야할 수칙에 관하여</span></a>
<a class=next href=https://novemberde.github.io/post/2017/04/18/Bitbucket_access_key_0/><span class=title>Next Page »</span><br><span>Bitbucket access key 발급하기</span></a></nav></footer><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//novemberde-github-io.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></article></main><footer class=footer><span>&copy; 2022 <a href=https://novemberde.github.io/>Novemberde's Blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>
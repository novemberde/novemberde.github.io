<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>만들어진 Docker image를 EC2 인스턴스에 배포하기 | Novemberde's Blog</title>
<meta name=keywords content="docker,ec2,deploy,image,ubuntu,배포"><meta name=description content="Summary 이제 모든 준비는 끝났다. Docker image를 EC2 인스턴스에 배포하자.
순서 Amazon web service에 Ubuntu OS를 사용하는 EC2 인스턴스 생성하기 접속 포트를 열어주고 별도의 Ubuntu 유저를 생성하기 EC2에 Docker를 설치하고 Ubuntu 유저에게 권한주기 Bitbucket을 사용하여 git repository 생성하기 Express JS를 사용하여 Node 서버 구축하기 PM2를 사용하여 EC2에 Node 서버 배포하기 Node 서버를 바탕으로 Dockerfile로 만들기 Docker Hub의 automated build를 사용하여 Docker image를 만들기 만들어진 Docker image를 EC2 인스턴스에 배포하기 Docker image를 받아오기 EC2 인스턴스에 SSH로 접속하자."><meta name=author content><link rel=canonical href=https://novemberde.github.io/post/2017/04/03/Docker_9/><link crossorigin=anonymous href=/assets/css/stylesheet.min.9f1d947375927e9847272b1f4e9be81336f539e513bf04d52cade31f81cad1af.css integrity="sha256-nx2Uc3WSfphHJysfTpvoEzb1OeUTvwTVLK3jH4HK0a8=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.5b9ae0304f93db6cc493f51846f012428af399c614b4f2fbdb7fa59dd4d5ef5b.js integrity="sha256-W5rgME+T22zEk/UYRvASQorzmcYUtPL723+lndTV71s=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://novemberde.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://novemberde.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://novemberde.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://novemberde.github.io/apple-touch-icon.png><link rel=mask-icon href=https://novemberde.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.121.2"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:#1d1e20;--entry:#2e2e33;--primary:rgba(255, 255, 255, 0.84);--secondary:rgba(255, 255, 255, 0.56);--tertiary:rgba(255, 255, 255, 0.16);--content:rgba(255, 255, 255, 0.74);--hljs-bg:#2e2e33;--code-bg:#37383e;--border:#333}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-9SF4VDQ4N0"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-9SF4VDQ4N0",{anonymize_ip:!1})}</script><meta property="og:title" content="만들어진 Docker image를 EC2 인스턴스에 배포하기"><meta property="og:description" content="Summary 이제 모든 준비는 끝났다. Docker image를 EC2 인스턴스에 배포하자.
순서 Amazon web service에 Ubuntu OS를 사용하는 EC2 인스턴스 생성하기 접속 포트를 열어주고 별도의 Ubuntu 유저를 생성하기 EC2에 Docker를 설치하고 Ubuntu 유저에게 권한주기 Bitbucket을 사용하여 git repository 생성하기 Express JS를 사용하여 Node 서버 구축하기 PM2를 사용하여 EC2에 Node 서버 배포하기 Node 서버를 바탕으로 Dockerfile로 만들기 Docker Hub의 automated build를 사용하여 Docker image를 만들기 만들어진 Docker image를 EC2 인스턴스에 배포하기 Docker image를 받아오기 EC2 인스턴스에 SSH로 접속하자."><meta property="og:type" content="article"><meta property="og:url" content="https://novemberde.github.io/post/2017/04/03/Docker_9/"><meta property="article:section" content="post"><meta property="article:published_time" content="2017-04-03T11:30:03+00:00"><meta property="article:modified_time" content="2017-04-03T11:30:03+00:00"><meta property="og:site_name" content="Novemberde dev logs"><meta name=twitter:card content="summary"><meta name=twitter:title content="만들어진 Docker image를 EC2 인스턴스에 배포하기"><meta name=twitter:description content="Summary 이제 모든 준비는 끝났다. Docker image를 EC2 인스턴스에 배포하자.
순서 Amazon web service에 Ubuntu OS를 사용하는 EC2 인스턴스 생성하기 접속 포트를 열어주고 별도의 Ubuntu 유저를 생성하기 EC2에 Docker를 설치하고 Ubuntu 유저에게 권한주기 Bitbucket을 사용하여 git repository 생성하기 Express JS를 사용하여 Node 서버 구축하기 PM2를 사용하여 EC2에 Node 서버 배포하기 Node 서버를 바탕으로 Dockerfile로 만들기 Docker Hub의 automated build를 사용하여 Docker image를 만들기 만들어진 Docker image를 EC2 인스턴스에 배포하기 Docker image를 받아오기 EC2 인스턴스에 SSH로 접속하자."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://novemberde.github.io/post/"},{"@type":"ListItem","position":2,"name":"만들어진 Docker image를 EC2 인스턴스에 배포하기","item":"https://novemberde.github.io/post/2017/04/03/Docker_9/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"만들어진 Docker image를 EC2 인스턴스에 배포하기","name":"만들어진 Docker image를 EC2 인스턴스에 배포하기","description":"Summary 이제 모든 준비는 끝났다. Docker image를 EC2 인스턴스에 배포하자.\n순서 Amazon web service에 Ubuntu OS를 사용하는 EC2 인스턴스 생성하기 접속 포트를 열어주고 별도의 Ubuntu 유저를 생성하기 EC2에 Docker를 설치하고 Ubuntu 유저에게 권한주기 Bitbucket을 사용하여 git repository 생성하기 Express JS를 사용하여 Node 서버 구축하기 PM2를 사용하여 EC2에 Node 서버 배포하기 Node 서버를 바탕으로 Dockerfile로 만들기 Docker Hub의 automated build를 사용하여 Docker image를 만들기 만들어진 Docker image를 EC2 인스턴스에 배포하기 Docker image를 받아오기 EC2 인스턴스에 SSH로 접속하자.","keywords":["docker","ec2","deploy","image","ubuntu","배포"],"articleBody":"Summary 이제 모든 준비는 끝났다. Docker image를 EC2 인스턴스에 배포하자.\n순서 Amazon web service에 Ubuntu OS를 사용하는 EC2 인스턴스 생성하기 접속 포트를 열어주고 별도의 Ubuntu 유저를 생성하기 EC2에 Docker를 설치하고 Ubuntu 유저에게 권한주기 Bitbucket을 사용하여 git repository 생성하기 Express JS를 사용하여 Node 서버 구축하기 PM2를 사용하여 EC2에 Node 서버 배포하기 Node 서버를 바탕으로 Dockerfile로 만들기 Docker Hub의 automated build를 사용하여 Docker image를 만들기 만들어진 Docker image를 EC2 인스턴스에 배포하기 Docker image를 받아오기 EC2 인스턴스에 SSH로 접속하자. 리눅스 계정은 이전에 만들었던 docker 로 로그인하자.\n로그인 후 docker에 이미지 리스트를 확인하자.\n# docker image의 목록 보기 $ docker images 아직 이미지를 pull한 적이 없으면 아무 리스트도 나오지 않을 것이다.\n이제 내 docker hub에서 image를 pull해보자\nimage를 pull하기에 앞서서 docker hub에 내 이미지가 private인지 public인지 확인해볼 필요가 있다. 만약 private으로 되어 있다면 pull을 해도 이미지를 찾을 수 없다고 나올것이다. 이럴 때는 아래와 같이 로그인을 시도한다.\n# 이와 같이 커맨드를 실행하면 id와 password를 입력하는 커맨드를 만날 것이다. $ docker login 로그인을 마쳤으면 이제 내 계정에 있는 image를 가져오자.\n# username에는 나의 docker hub의 name을 적자. 이는 오른쪽 위에서 내 설정에 들어가면 볼 수 있다. $ docker pull username:docker_node_server 이미지를 성공적으로 pull하였으면 이제 run할 차례만 남았다.\n80포트로 동작하게 할 것. 우리 패키지는 3000번의 포트로 동작하니 포워딩시켜주어야 한다. 컨테이너명은 my_first_server 로 해보자 $ docker run --name my_first_server -p 80:3000 docker_node_server 잘 따라와 주었다. AWS에서 EC2 instance를 보면 public dns를 볼 수 있다.\n크롬브라우져를 켜고 복사/붙여넣기를 하면 우리의 사이트를 볼 수 있을 것이다.\n","wordCount":"236","inLanguage":"en","datePublished":"2017-04-03T11:30:03Z","dateModified":"2017-04-03T11:30:03Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://novemberde.github.io/post/2017/04/03/Docker_9/"},"publisher":{"@type":"Organization","name":"Novemberde's Blog","logo":{"@type":"ImageObject","url":"https://novemberde.github.io/favicon.ico"}}}</script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8620431066400094" crossorigin=anonymous></script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://novemberde.github.io/ accesskey=h title="Novemberde's Blog (Alt + H)">Novemberde's Blog</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://novemberde.github.io/search title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://novemberde.github.io/post/ title=Post><span>Post</span></a></li><li><a href=https://novemberde.github.io/about title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://novemberde.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://novemberde.github.io/post/>Posts</a></div><h1 class=post-title>만들어진 Docker image를 EC2 인스턴스에 배포하기</h1><div class=post-meta>April 3, 2017&amp;nbsp;·&amp;nbsp;2 min</div></header><div class=post-content><h2 id=summary>Summary<a hidden class=anchor aria-hidden=true href=#summary>#</a></h2><hr><p>이제 모든 준비는 끝났다. Docker image를 EC2 인스턴스에 배포하자.</p><hr><h2 id=순서>순서<a hidden class=anchor aria-hidden=true href=#순서>#</a></h2><hr><ol><li>Amazon web service에 Ubuntu OS를 사용하는 EC2 인스턴스 생성하기</li><li>접속 포트를 열어주고 별도의 Ubuntu 유저를 생성하기</li><li>EC2에 Docker를 설치하고 Ubuntu 유저에게 권한주기</li><li>Bitbucket을 사용하여 git repository 생성하기</li><li>Express JS를 사용하여 Node 서버 구축하기</li><li>PM2를 사용하여 EC2에 Node 서버 배포하기</li><li>Node 서버를 바탕으로 Dockerfile로 만들기</li><li>Docker Hub의 automated build를 사용하여 Docker image를 만들기</li><li>만들어진 Docker image를 EC2 인스턴스에 배포하기</li></ol><hr><h2 id=docker-image를-받아오기>Docker image를 받아오기<a hidden class=anchor aria-hidden=true href=#docker-image를-받아오기>#</a></h2><hr><p>EC2 인스턴스에 SSH로 접속하자. 리눅스 계정은 이전에 만들었던 docker 로 로그인하자.</p><p>로그인 후 docker에 이미지 리스트를 확인하자.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># docker image의 목록 보기</span>
</span></span><span style=display:flex><span>$ docker images
</span></span></code></pre></div><p>아직 이미지를 pull한 적이 없으면 아무 리스트도 나오지 않을 것이다.</p><p>이제 내 docker hub에서 image를 pull해보자</p><p>image를 pull하기에 앞서서 docker hub에 내 이미지가 private인지 public인지 확인해볼 필요가 있다.
만약 private으로 되어 있다면 pull을 해도 이미지를 찾을 수 없다고 나올것이다.
이럴 때는 아래와 같이 로그인을 시도한다.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 이와 같이 커맨드를 실행하면 id와 password를 입력하는 커맨드를 만날 것이다.</span>
</span></span><span style=display:flex><span>$ docker login
</span></span></code></pre></div><p>로그인을 마쳤으면 이제 내 계정에 있는 image를 가져오자.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># username에는 나의 docker hub의 name을 적자. 이는 오른쪽 위에서 내 설정에 들어가면 볼 수 있다.</span>
</span></span><span style=display:flex><span>$ docker pull username:docker_node_server
</span></span></code></pre></div><p>이미지를 성공적으로 pull하였으면 이제 run할 차례만 남았다.</p><ul><li>80포트로 동작하게 할 것. 우리 패키지는 3000번의 포트로 동작하니 포워딩시켜주어야 한다.</li><li>컨테이너명은 my_first_server 로 해보자</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ docker run --name my_first_server -p 80:3000 docker_node_server
</span></span></code></pre></div><hr><p>잘 따라와 주었다. AWS에서 EC2 instance를 보면 public dns를 볼 수 있다.</p><p>크롬브라우져를 켜고 복사/붙여넣기를 하면 우리의 사이트를 볼 수 있을 것이다.</p><hr></div><footer class=post-footer><ul class=post-tags><li><a href=https://novemberde.github.io/tags/docker/>docker</a></li><li><a href=https://novemberde.github.io/tags/ec2/>ec2</a></li><li><a href=https://novemberde.github.io/tags/deploy/>deploy</a></li><li><a href=https://novemberde.github.io/tags/image/>image</a></li><li><a href=https://novemberde.github.io/tags/ubuntu/>ubuntu</a></li><li><a href=https://novemberde.github.io/tags/%EB%B0%B0%ED%8F%AC/>배포</a></li></ul><nav class=paginav><a class=prev href=https://novemberde.github.io/post/2017/04/09/Docker_Registry_0/><span class=title>« Prev Page</span><br><span>나만의 private docker registry 구성하기.</span>
</a><a class=next href=https://novemberde.github.io/post/2017/04/02/Docker_8/><span class=title>Next Page »</span><br><span>Docker Hub의 automated build를 사용하여 Docker image를 만들기</span></a></nav></footer><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//novemberde-github-io.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></article></main><footer class=footer><span>&copy; 2024 <a href=https://novemberde.github.io/>Novemberde's Blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>
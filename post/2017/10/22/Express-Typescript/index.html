<!doctype html><html lang=en dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>TypeScript로 Node.js Express 서버 개발하기 | Novemberde's Blog</title>
<meta name=keywords content="typescript,nodejs,node,js,express,server,development,개발,서버">
<meta name=description content="Summary  최근에 직방의 AWS Lambda 코드를 세미나에서 스쳐지나가는 것을 보았다. TypeScript로 짜여져 있었고 나중에 지속적인 프로젝트 관리적인 이점이 있을 것으로 생각이 되기 때문에 TypeScript로 프로젝트를 구성해보는 것을 정리해보기로 결심했다.
node.js 프로젝트 생성하기  먼저 프로젝트를 생성한다. 기존에 npm과 nodejs가 설치되어 있다는 전제하에 시작한다.
만약 설치되어 있지 않다면 다음의 링크를 참고한다. https://nodejs.org/ko/download/package-manager/
$ mkdir node_typescript $ npm init -y 그리고 편의를 위해 사전에 설치되어 있어야 하는 패키지들이 있다.
 npx: global로 패키지를 설치하지 않더라도 프로젝트 내에서 사용할 수 있게 해준다.">
<meta name=author content>
<link rel=canonical href=https://novemberde.github.io/post/2017/10/22/Express-Typescript/>
<link crossorigin=anonymous href=/assets/css/stylesheet.min.9f1d947375927e9847272b1f4e9be81336f539e513bf04d52cade31f81cad1af.css integrity="sha256-nx2Uc3WSfphHJysfTpvoEzb1OeUTvwTVLK3jH4HK0a8=" rel="preload stylesheet" as=style>
<script defer crossorigin=anonymous src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://novemberde.github.io/favicon.ico>
<link rel=icon type=image/png sizes=16x16 href=https://novemberde.github.io/favicon-16x16.png>
<link rel=icon type=image/png sizes=32x32 href=https://novemberde.github.io/favicon-32x32.png>
<link rel=apple-touch-icon href=https://novemberde.github.io/apple-touch-icon.png>
<link rel=mask-icon href=https://novemberde.github.io/safari-pinned-tab.svg>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<meta name=generator content="Hugo 0.88.1">
<noscript>
<style>#theme-toggle,.top-link{display:none}</style>
<style>@media(prefers-color-scheme:dark){:root{--theme:#1d1e20;--entry:#2e2e33;--primary:rgba(255, 255, 255, 0.84);--secondary:rgba(255, 255, 255, 0.56);--tertiary:rgba(255, 255, 255, 0.16);--content:rgba(255, 255, 255, 0.74);--hljs-bg:#2e2e33;--code-bg:#37383e;--border:#333}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style>
</noscript><meta property="og:title" content="TypeScript로 Node.js Express 서버 개발하기">
<meta property="og:description" content="Summary  최근에 직방의 AWS Lambda 코드를 세미나에서 스쳐지나가는 것을 보았다. TypeScript로 짜여져 있었고 나중에 지속적인 프로젝트 관리적인 이점이 있을 것으로 생각이 되기 때문에 TypeScript로 프로젝트를 구성해보는 것을 정리해보기로 결심했다.
node.js 프로젝트 생성하기  먼저 프로젝트를 생성한다. 기존에 npm과 nodejs가 설치되어 있다는 전제하에 시작한다.
만약 설치되어 있지 않다면 다음의 링크를 참고한다. https://nodejs.org/ko/download/package-manager/
$ mkdir node_typescript $ npm init -y 그리고 편의를 위해 사전에 설치되어 있어야 하는 패키지들이 있다.
 npx: global로 패키지를 설치하지 않더라도 프로젝트 내에서 사용할 수 있게 해준다.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://novemberde.github.io/post/2017/10/22/Express-Typescript/"><meta property="article:section" content="post">
<meta property="article:published_time" content="2017-10-22T13:30:03+00:00">
<meta property="article:modified_time" content="2017-10-22T13:30:03+00:00"><meta property="og:site_name" content="Novemberde's Blog">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="TypeScript로 Node.js Express 서버 개발하기">
<meta name=twitter:description content="Summary  최근에 직방의 AWS Lambda 코드를 세미나에서 스쳐지나가는 것을 보았다. TypeScript로 짜여져 있었고 나중에 지속적인 프로젝트 관리적인 이점이 있을 것으로 생각이 되기 때문에 TypeScript로 프로젝트를 구성해보는 것을 정리해보기로 결심했다.
node.js 프로젝트 생성하기  먼저 프로젝트를 생성한다. 기존에 npm과 nodejs가 설치되어 있다는 전제하에 시작한다.
만약 설치되어 있지 않다면 다음의 링크를 참고한다. https://nodejs.org/ko/download/package-manager/
$ mkdir node_typescript $ npm init -y 그리고 편의를 위해 사전에 설치되어 있어야 하는 패키지들이 있다.
 npx: global로 패키지를 설치하지 않더라도 프로젝트 내에서 사용할 수 있게 해준다.">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://novemberde.github.io/post/"},{"@type":"ListItem","position":2,"name":"TypeScript로 Node.js Express 서버 개발하기","item":"https://novemberde.github.io/post/2017/10/22/Express-Typescript/"}]}</script>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"TypeScript로 Node.js Express 서버 개발하기","name":"TypeScript로 Node.js Express 서버 개발하기","description":"Summary  최근에 직방의 AWS Lambda 코드를 세미나에서 스쳐지나가는 것을 보았다. TypeScript로 짜여져 있었고 나중에 지속적인 프로젝트 관리적인 이점이 있을 것으로 생각이 되기 때문에 TypeScript로 프로젝트를 구성해보는 것을 정리해보기로 결심했다.\nnode.js 프로젝트 생성하기  먼저 프로젝트를 생성한다. 기존에 npm과 nodejs가 설치되어 있다는 전제하에 시작한다.\n만약 설치되어 있지 않다면 다음의 링크를 참고한다. https://nodejs.org/ko/download/package-manager/\n$ mkdir node_typescript $ npm init -y 그리고 편의를 위해 사전에 설치되어 있어야 하는 패키지들이 있다.\n npx: global로 패키지를 설치하지 않더라도 프로젝트 내에서 사용할 수 있게 해준다.","keywords":["typescript","nodejs","node","js","express","server","development","개발","서버"],"articleBody":"Summary  최근에 직방의 AWS Lambda 코드를 세미나에서 스쳐지나가는 것을 보았다. TypeScript로 짜여져 있었고 나중에 지속적인 프로젝트 관리적인 이점이 있을 것으로 생각이 되기 때문에 TypeScript로 프로젝트를 구성해보는 것을 정리해보기로 결심했다.\nnode.js 프로젝트 생성하기  먼저 프로젝트를 생성한다. 기존에 npm과 nodejs가 설치되어 있다는 전제하에 시작한다.\n만약 설치되어 있지 않다면 다음의 링크를 참고한다. https://nodejs.org/ko/download/package-manager/\n$ mkdir node_typescript $ npm init -y 그리고 편의를 위해 사전에 설치되어 있어야 하는 패키지들이 있다.\n npx: global로 패키지를 설치하지 않더라도 프로젝트 내에서 사용할 수 있게 해준다. nodemon: 파일이 변화될 때마다 재실행해준다. typescript: typescript로 구성한 코드를 javascript로 트랜스파일링 해준다. npm-run-all: 여러 npm 실행 명령을 병렬로 실행할 수 있게 해준다. webpack: 요즘 각광받는 모듈 번들러 webpack-cli: webpack 명령을 사용하기 위한 CLI도구 source-map-support: typescript로 개발시 source-map을 지원해준다. @types/express: express 모듈에 대한 type을 지원해준다.  $ npm install -g npx $ npm install --save-dev typescript ts-loader npm-run-all webpack @types/express nodemon webpack-cli $ npm install --save express source-map-support 기본 설정하기  다음과 같이 typescript에 대한 기본 설정을 한다.\n$ npx tsc --init tsconfig.json와 같은 파일이 생성되는데 안에 주석처리 되어 있는 “inlineSourceMap\"을 true로 주석을 풀어준다.\n[tsconfig.json] { \"compilerOptions\": { \"lib\": [ \"es5\", \"es6\" ], \"target\": \"es5\", \"module\": \"commonjs\", \"moduleResolution\": \"node\", \"outDir\": \"./build\", \"emitDecoratorMetadata\": true, \"experimentalDecorators\": true, \"sourceMap\": true } }  아래와 같이 루트디렉터리에 webpack.config.js 파일을 생성하여 아래의 코드를 입력한다.\n[config/webpack.config.js] const path = require('path'); module.exports = { entry: './src/www.ts', module: { rules: [ { test: /\\.tsx?$/, use: 'ts-loader', exclude: /node_modules/ } ] }, devtool: 'source-map', target: 'node', resolve: { extensions: [ '.tsx', '.ts', '.js' ] }, output: { filename: 'bundle.js', path: path.resolve(__dirname, 'dist') } };  설정을 완료했다면 src 디렉터리를 추가하고 App.ts파일을 생성하고 아래의 코드를 입력한다.\n[src/App.ts] import * as express from \"express\"; class App { public app: express.Application; /** * @ class App * @ method bootstrap * @ static * */ public static bootstrap (): App { return new App(); } constructor () { this.app = express(); this.app.get(\"/\", (req: express.Request, res: express.Response, next: express.NextFunction) = { res.send(\"Hello world\"); }); } } export default App;  express server를 실행하는 코드를 작성한다.\n[src/www.ts] import 'source-map-support/register'; // source-map을 사용하기 위해 추가함. import App from './App'; import * as express from \"express\"; const port: number = Number(process.env.PORT) || 3000; const app: express.Application = new App().app; app.listen(port, () = console.log(`Express server listening at ${port}`)) .on('error', err = console.error(err));  package.json에 scripts에 다음 설정도 추가해준다.\n[package.json] { \"start\": \"nodemon --watch src --delay 1 --exec 'ts-node' src/www.ts\", \"build\": \"webpack --config webpack.config.js\" } 마지막으로 npm start를 하면 코드가 바뀔 때마다 재시작 하는 것을 확인할 수 있다. 여기서 nodemon을 실행할 때 ts-node를 사용해서 typescript로 작성된 코드를 바로 동작시킨다.\n$ npm start  practice_node_server@1.0.0 start practice_node_server  nodemon --watch src --delay 1 --exec 'ts-node' src/www.ts [nodemon] 1.18.6 [nodemon] to restart at any time, enter `rs` [nodemon] watching: practice_node_server/src/**/* [nodemon] starting `ts-node src/www.ts` Express server listening at 3000 실제로 배포할 때는 컴파일된 bundle file 하나만 배포하게 된다. 다음과 같은 명령어로 실행가능한 서버하나의 파일을 생성하고 실행해본다.\n# Webpack을 사용하여 번들링한다. $ npm run build  practice_node_server@1.0.0 build practice_node_server  webpack --config webpack.config.js # Bundled file을 실행해본다. $ node dist/bundle.js Express server listening at 3000 사소한 팁  추가적으로 초기에 build될 때 엄청나게 restart할 경우가 있는데, 이는 nodemon옵션으로 조절할 수 있다.\n$ nodemon --delay 10 server.js # 10초 $ nodemon --delay 2.5 server.js # 2.5초 $ nodemon --delay 2500ms server.js # 2.5초 그리고 Server side rendering을 지원해야하는 경우 views directory가 빌드된 패키지에 포함되어 있어야한다. 이걸 지원하기 위해서는 copy-webpack-plugin을 사용하면 손쉽게 빌드된 패키지에 views 디렉터리를 포함시킬 수 있다.\n고찰  TypeScript를 따로 공부해두긴 했었지만 실제로 적용하려하니 개발환경을 설정하는 것이 제일 힘들었다. 하나씩 webpack을 설정해야 되는 부분이 생각보다 디테일을 요구하였다. 또한 각각의 설정에 따른 결과를 명확히 알아야만 효율적인 bundling을 구현할 수 있다는 점이 힘들었다.\nTypeScript의 문법 자체는 기존에 여러 웹사이트를 SPA 방식으로 React.js로 개발한 경험으로 어느정도 커버가 되었다. 디테일한 데코레이터를 지정하는 것은 아직 연습이 필요해 보이지만 개발하는데 지장될 정도는 아닌 것 같다.\n만약 처음에 Node.js를 접하는 사람이 개발을 하는 경우에는 TypeScript를 사용하지 말라고 권하고 싶다. 다른 C++, Java, Go 와 같은 언어는 Type 지원이 Compiler에서 지원이 되기 때문에 따로 설정이 필요하지 않지만, TypeScript는 Webpack을 사용할 경우에는 ts-loader를 webpack에 module로 심어줘야 하는 등의 많은 번거로움이 있기 때문에 처음부터 진이 빠져 개발의 흥미를 잃을 가능성이 있기 때문이다.\n하지만 장점으로는 처음에 설정만 제대로 한다면 Type지원이 되기 때문에 Javascript로 개발할 때 약점이었던 IDE상에서의 Hint가 정의한 Type대로 나타나는 점이다. 각 Object의 어떤 function이 있고 각 parameter의 Type을 알려주기 때문에 점차 큰 프로젝트로 변화할 때는 개발 속도의 지연이 없을 것이다.\n이렇게 한 번 정리해놓았기 때문에 다음번에는 편한 개발이 가능할 것이다.\nReferences   https://webpack.js.org/ https://www.youtube.com/watch?v=ose1VIo213k https://github.com/novemberde/practice_node_server  ","wordCount":"723","inLanguage":"en","datePublished":"2017-10-22T13:30:03Z","dateModified":"2017-10-22T13:30:03Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://novemberde.github.io/post/2017/10/22/Express-Typescript/"},"publisher":{"@type":"Organization","name":"Novemberde's Blog","logo":{"@type":"ImageObject","url":"https://novemberde.github.io/favicon.ico"}}}</script><script async src=//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script>
<script>(adsbygoogle=window.adsbygoogle||[]).push({google_ad_client:"ca-pub-8620431066400094",enable_page_level_ads:!0})</script>
</head>
<body id=top>
<script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script>
<header class=header>
<nav class=nav>
<div class=logo>
<a href=https://novemberde.github.io/ accesskey=h title="Novemberde's Blog (Alt + H)">Novemberde's Blog</a>
<span class=logo-switches>
<button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</button>
</span>
</div>
<ul id=menu>
<li>
<a href=https://novemberde.github.io/post/ title=Post>
<span>Post</span>
</a>
</li>
<li>
<a href=https://novemberde.github.io/about title=About>
<span>About</span>
</a>
</li>
<li>
<a href=https://novemberde.github.io/tags/ title=Tags>
<span>Tags</span>
</a>
</li>
</ul>
</nav>
</header>
<main class=main>
<article class=post-single>
<header class=post-header>
<div class=breadcrumbs><a href=https://novemberde.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://novemberde.github.io/post/>Posts</a></div>
<h1 class=post-title>
TypeScript로 Node.js Express 서버 개발하기
</h1>
<div class=post-meta>October 22, 2017&nbsp;·&nbsp;4 min
</div>
</header>
<div class=post-content><h2 id=summary>Summary<a hidden class=anchor aria-hidden=true href=#summary>#</a></h2>
<hr>
<p>최근에 직방의 AWS Lambda 코드를 세미나에서 스쳐지나가는 것을 보았다.
TypeScript로 짜여져 있었고 나중에 지속적인 프로젝트 관리적인 이점이 있을 것으로 생각이 되기 때문에 TypeScript로 프로젝트를 구성해보는 것을 정리해보기로 결심했다.</p>
<h2 id=nodejs-프로젝트-생성하기>node.js 프로젝트 생성하기<a hidden class=anchor aria-hidden=true href=#nodejs-프로젝트-생성하기>#</a></h2>
<hr>
<p>먼저 프로젝트를 생성한다. 기존에 npm과 nodejs가 설치되어 있다는 전제하에 시작한다.</p>
<p>만약 설치되어 있지 않다면 다음의 링크를 참고한다. <a href=https://nodejs.org/ko/download/package-manager/>https://nodejs.org/ko/download/package-manager/</a></p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>$ mkdir node_typescript
$ npm init -y
</code></pre></div><p>그리고 편의를 위해 사전에 설치되어 있어야 하는 패키지들이 있다.</p>
<ul>
<li>npx: global로 패키지를 설치하지 않더라도 프로젝트 내에서 사용할 수 있게 해준다.</li>
<li>nodemon: 파일이 변화될 때마다 재실행해준다.</li>
<li>typescript: typescript로 구성한 코드를 javascript로 트랜스파일링 해준다.</li>
<li>npm-run-all: 여러 npm 실행 명령을 병렬로 실행할 수 있게 해준다.</li>
<li>webpack: 요즘 각광받는 모듈 번들러</li>
<li>webpack-cli: webpack 명령을 사용하기 위한 CLI도구</li>
<li>source-map-support: typescript로 개발시 source-map을 지원해준다.</li>
<li>@types/express: express 모듈에 대한 type을 지원해준다.</li>
</ul>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>$ npm install -g npx
$ npm install --save-dev typescript ts-loader npm-run-all webpack @types/express nodemon webpack-cli
$ npm install --save express source-map-support
</code></pre></div><h2 id=기본-설정하기>기본 설정하기<a hidden class=anchor aria-hidden=true href=#기본-설정하기>#</a></h2>
<hr>
<p>다음과 같이 typescript에 대한 기본 설정을 한다.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>$ npx tsc --init
</code></pre></div><p>tsconfig.json와 같은 파일이 생성되는데 안에 주석처리 되어 있는 &ldquo;inlineSourceMap"을 true로 주석을 풀어준다.</p>
<h4 id=tsconfigjson>[tsconfig.json]<a hidden class=anchor aria-hidden=true href=#tsconfigjson>#</a></h4>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
  <span style=color:#f92672>&#34;compilerOptions&#34;</span>: {
     <span style=color:#f92672>&#34;lib&#34;</span>: [
        <span style=color:#e6db74>&#34;es5&#34;</span>,
        <span style=color:#e6db74>&#34;es6&#34;</span>
     ],
     <span style=color:#f92672>&#34;target&#34;</span>: <span style=color:#e6db74>&#34;es5&#34;</span>,
     <span style=color:#f92672>&#34;module&#34;</span>: <span style=color:#e6db74>&#34;commonjs&#34;</span>,
     <span style=color:#f92672>&#34;moduleResolution&#34;</span>: <span style=color:#e6db74>&#34;node&#34;</span>,
     <span style=color:#f92672>&#34;outDir&#34;</span>: <span style=color:#e6db74>&#34;./build&#34;</span>,
     <span style=color:#f92672>&#34;emitDecoratorMetadata&#34;</span>: <span style=color:#66d9ef>true</span>,
     <span style=color:#f92672>&#34;experimentalDecorators&#34;</span>: <span style=color:#66d9ef>true</span>,
     <span style=color:#f92672>&#34;sourceMap&#34;</span>: <span style=color:#66d9ef>true</span>
  }
}
</code></pre></div><hr>
<p>아래와 같이 루트디렉터리에 webpack.config.js 파일을 생성하여 아래의 코드를 입력한다.</p>
<h4 id=configwebpackconfigjs>[config/webpack.config.js]<a hidden class=anchor aria-hidden=true href=#configwebpackconfigjs>#</a></h4>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>path</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;path&#39;</span>);

<span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>exports</span> <span style=color:#f92672>=</span> {
  <span style=color:#a6e22e>entry</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;./src/www.ts&#39;</span>,
  <span style=color:#a6e22e>module</span><span style=color:#f92672>:</span> {
    <span style=color:#a6e22e>rules</span><span style=color:#f92672>:</span> [
      {
        <span style=color:#a6e22e>test</span><span style=color:#f92672>:</span> <span style=color:#e6db74>/\.tsx?$/</span>,
        <span style=color:#a6e22e>use</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;ts-loader&#39;</span>,
        <span style=color:#a6e22e>exclude</span><span style=color:#f92672>:</span> <span style=color:#e6db74>/node_modules/</span>
      }
    ]
  },
  <span style=color:#a6e22e>devtool</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;source-map&#39;</span>,
  <span style=color:#a6e22e>target</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;node&#39;</span>,
  <span style=color:#a6e22e>resolve</span><span style=color:#f92672>:</span> {
    <span style=color:#a6e22e>extensions</span><span style=color:#f92672>:</span> [ <span style=color:#e6db74>&#39;.tsx&#39;</span>, <span style=color:#e6db74>&#39;.ts&#39;</span>, <span style=color:#e6db74>&#39;.js&#39;</span> ]
  },
  <span style=color:#a6e22e>output</span><span style=color:#f92672>:</span> {
    <span style=color:#a6e22e>filename</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;bundle.js&#39;</span>,
    <span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>path</span>.<span style=color:#a6e22e>resolve</span>(<span style=color:#ae81ff>__</span><span style=color:#a6e22e>dirname</span>, <span style=color:#e6db74>&#39;dist&#39;</span>)
  }
};
</code></pre></div><hr>
<p>설정을 완료했다면 src 디렉터리를 추가하고 App.ts파일을 생성하고 아래의 코드를 입력한다.</p>
<h4 id=srcappts>[src/App.ts]<a hidden class=anchor aria-hidden=true href=#srcappts>#</a></h4>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=color:#66d9ef>import</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>as</span> <span style=color:#a6e22e>express</span> <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;express&#34;</span>;

<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>App</span> {
  <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>app</span>: <span style=color:#66d9ef>express.Application</span>;

  <span style=color:#75715e>/**
</span><span style=color:#75715e>   * @ class App
</span><span style=color:#75715e>   * @ method bootstrap
</span><span style=color:#75715e>   * @ static
</span><span style=color:#75715e>   * 
</span><span style=color:#75715e>   */</span>
  <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#a6e22e>bootstrap</span> ()<span style=color:#f92672>:</span> <span style=color:#a6e22e>App</span> {
    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>App</span>();
  }

  <span style=color:#66d9ef>constructor</span> () {
    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>app</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>express</span>();
    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>app</span>.<span style=color:#66d9ef>get</span>(<span style=color:#e6db74>&#34;/&#34;</span>, (<span style=color:#a6e22e>req</span>: <span style=color:#66d9ef>express.Request</span>, <span style=color:#a6e22e>res</span>: <span style=color:#66d9ef>express.Response</span>, <span style=color:#a6e22e>next</span>: <span style=color:#66d9ef>express.NextFunction</span>) <span style=color:#f92672>=&gt;</span> {
      <span style=color:#a6e22e>res</span>.<span style=color:#a6e22e>send</span>(<span style=color:#e6db74>&#34;Hello world&#34;</span>);
    });
  }
}

<span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#a6e22e>App</span>;
</code></pre></div><hr>
<p>express server를 실행하는 코드를 작성한다.</p>
<h4 id=srcwwwts>[src/www.ts]<a hidden class=anchor aria-hidden=true href=#srcwwwts>#</a></h4>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=color:#66d9ef>import</span> <span style=color:#e6db74>&#39;source-map-support/register&#39;</span>; <span style=color:#75715e>// source-map을 사용하기 위해 추가함.
</span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>App</span> <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;./App&#39;</span>;
<span style=color:#66d9ef>import</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>as</span> <span style=color:#a6e22e>express</span> <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;express&#34;</span>;

<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>port</span>: <span style=color:#66d9ef>number</span> <span style=color:#f92672>=</span> Number(<span style=color:#a6e22e>process</span>.<span style=color:#a6e22e>env</span>.<span style=color:#a6e22e>PORT</span>) <span style=color:#f92672>||</span> <span style=color:#ae81ff>3000</span>;
<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>app</span>: <span style=color:#66d9ef>express.Application</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>App</span>().<span style=color:#a6e22e>app</span>;

<span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>listen</span>(<span style=color:#a6e22e>port</span>, () <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>`Express server listening at </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>port</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>))
.<span style=color:#a6e22e>on</span>(<span style=color:#e6db74>&#39;error&#39;</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>error</span>(<span style=color:#a6e22e>err</span>));
</code></pre></div><hr>
<p>package.json에 scripts에 다음 설정도 추가해준다.</p>
<h4 id=packagejson>[package.json]<a hidden class=anchor aria-hidden=true href=#packagejson>#</a></h4>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
  <span style=color:#f92672>&#34;start&#34;</span>: <span style=color:#e6db74>&#34;nodemon --watch src --delay 1 --exec &#39;ts-node&#39; src/www.ts&#34;</span>,
  <span style=color:#f92672>&#34;build&#34;</span>: <span style=color:#e6db74>&#34;webpack --config webpack.config.js&#34;</span>
}
</code></pre></div><p>마지막으로 npm start를 하면 코드가 바뀔 때마다 재시작 하는 것을 확인할 수 있다.
여기서 nodemon을 실행할 때 ts-node를 사용해서 typescript로 작성된 코드를 바로 동작시킨다.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>$ npm start

&gt; practice_node_server@1.0.0 start practice_node_server
&gt; nodemon --watch src --delay <span style=color:#ae81ff>1</span> --exec <span style=color:#e6db74>&#39;ts-node&#39;</span> src/www.ts

<span style=color:#f92672>[</span>nodemon<span style=color:#f92672>]</span> 1.18.6
<span style=color:#f92672>[</span>nodemon<span style=color:#f92672>]</span> to restart at any time, enter <span style=color:#e6db74>`</span>rs<span style=color:#e6db74>`</span>
<span style=color:#f92672>[</span>nodemon<span style=color:#f92672>]</span> watching: practice_node_server/src/**/*
<span style=color:#f92672>[</span>nodemon<span style=color:#f92672>]</span> starting <span style=color:#e6db74>`</span>ts-node src/www.ts<span style=color:#e6db74>`</span>
Express server listening at <span style=color:#ae81ff>3000</span>
</code></pre></div><p>실제로 배포할 때는 컴파일된 bundle file 하나만 배포하게 된다.
다음과 같은 명령어로 실행가능한 서버하나의 파일을 생성하고 실행해본다.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=color:#75715e># Webpack을 사용하여 번들링한다.</span>
$ npm run build

&gt; practice_node_server@1.0.0 build practice_node_server
&gt; webpack --config webpack.config.js


<span style=color:#75715e># Bundled file을 실행해본다.</span>
$ node dist/bundle.js
Express server listening at <span style=color:#ae81ff>3000</span>
</code></pre></div><h2 id=사소한-팁>사소한 팁<a hidden class=anchor aria-hidden=true href=#사소한-팁>#</a></h2>
<hr>
<p>추가적으로 초기에 build될 때 엄청나게 restart할 경우가 있는데, 이는 nodemon옵션으로 조절할 수 있다.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>$ nodemon --delay <span style=color:#ae81ff>10</span> server.js  <span style=color:#75715e># 10초</span>
$ nodemon --delay 2.5 server.js <span style=color:#75715e># 2.5초</span>
$ nodemon --delay 2500ms server.js  <span style=color:#75715e># 2.5초</span>
</code></pre></div><p>그리고 Server side rendering을 지원해야하는 경우 views directory가 빌드된 패키지에 포함되어 있어야한다.
이걸 지원하기 위해서는 <a href=https://www.npmjs.com/package/copy-webpack-plugin>copy-webpack-plugin</a>을 사용하면 손쉽게 빌드된 패키지에 views 디렉터리를 포함시킬 수 있다.</p>
<h2 id=고찰>고찰<a hidden class=anchor aria-hidden=true href=#고찰>#</a></h2>
<hr>
<p>TypeScript를 따로 공부해두긴 했었지만 실제로 적용하려하니 개발환경을 설정하는 것이 제일 힘들었다.
하나씩 webpack을 설정해야 되는 부분이 생각보다 디테일을 요구하였다. 또한 각각의 설정에 따른 결과를 명확히
알아야만 효율적인 bundling을 구현할 수 있다는 점이 힘들었다.</p>
<p>TypeScript의 문법 자체는 기존에 여러 웹사이트를 SPA 방식으로 React.js로 개발한 경험으로 어느정도 커버가 되었다.
디테일한 데코레이터를 지정하는 것은 아직 연습이 필요해 보이지만 개발하는데 지장될 정도는 아닌 것 같다.</p>
<p>만약 처음에 Node.js를 접하는 사람이 개발을 하는 경우에는 TypeScript를 사용하지 말라고 권하고 싶다.
다른 C++, Java, Go 와 같은 언어는 Type 지원이 Compiler에서 지원이 되기 때문에 따로 설정이
필요하지 않지만, TypeScript는 Webpack을 사용할 경우에는 ts-loader를 webpack에 module로 심어줘야 하는 등의
많은 번거로움이 있기 때문에 처음부터 진이 빠져 개발의 흥미를 잃을 가능성이 있기 때문이다.</p>
<p>하지만 장점으로는 처음에 설정만 제대로 한다면 Type지원이 되기 때문에 Javascript로 개발할 때 약점이었던
IDE상에서의 Hint가 정의한 Type대로 나타나는 점이다. 각 Object의 어떤 function이 있고 각 parameter의 Type을
알려주기 때문에 점차 큰 프로젝트로 변화할 때는 개발 속도의 지연이 없을 것이다.</p>
<p>이렇게 한 번 정리해놓았기 때문에 다음번에는 편한 개발이 가능할 것이다.</p>
<h2 id=references>References<a hidden class=anchor aria-hidden=true href=#references>#</a></h2>
<hr>
<ul>
<li><a href=https://webpack.js.org/>https://webpack.js.org/</a></li>
<li><a href="https://www.youtube.com/watch?v=ose1VIo213k">https://www.youtube.com/watch?v=ose1VIo213k</a></li>
<li><a href=https://github.com/novemberde/practice_node_server>https://github.com/novemberde/practice_node_server</a></li>
</ul>
</div>
<footer class=post-footer>
<ul class=post-tags>
<li><a href=https://novemberde.github.io/tags/typescript/>typescript</a></li>
<li><a href=https://novemberde.github.io/tags/nodejs/>nodejs</a></li>
<li><a href=https://novemberde.github.io/tags/node/>node</a></li>
<li><a href=https://novemberde.github.io/tags/js/>js</a></li>
<li><a href=https://novemberde.github.io/tags/express/>express</a></li>
<li><a href=https://novemberde.github.io/tags/server/>server</a></li>
<li><a href=https://novemberde.github.io/tags/development/>development</a></li>
<li><a href=https://novemberde.github.io/tags/%EA%B0%9C%EB%B0%9C/>개발</a></li>
<li><a href=https://novemberde.github.io/tags/%EC%84%9C%EB%B2%84/>서버</a></li>
</ul>
<nav class=paginav>
<a class=prev href=https://novemberde.github.io/post/2017/11/05/Node.JS_Library/>
<span class=title>« Prev Page</span>
<br>
<span>Node js 라이브러리 및 유용한 자료</span>
</a>
<a class=next href=https://novemberde.github.io/post/2017/10/22/OS-Command/>
<span class=title>Next Page »</span>
<br>
<span>유용한 OS 명령어 모음</span>
</a>
</nav>
</footer>
<div id=disqus_thread></div>
<script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return}var b=document,a=b.createElement('script');a.async=!0,a.src='//novemberde-github-io.disqus.com/embed.js',a.setAttribute('data-timestamp',+new Date),(b.head||b.body).appendChild(a)})()</script>
<noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript>
<a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a>
</article>
</main>
<footer class=footer>
<span>&copy; 2021 <a href=https://novemberde.github.io/>Novemberde's Blog</a></span>
<span>
Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a>
</span>
</footer>
<a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a>
<script>let menu=document.getElementById('menu');menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script>
<script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script>
<script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script>
</body>
</html>
<!doctype html><html lang=en dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>Direnv를 활용한 프로젝트 별 환경설정하기 | Novemberde's Blog</title>
<meta name=keywords content="direnv,환경설정,environment,env,설정,project">
<meta name=description content="현재 Amazon EKS위에 컨테이너를 배포하기 위한 환경을 구축중이다. 각 운영되는 서비스 또는 Repository마다 환경들이 다르고, 개인으로 운영하는 서비스도 가끔 확인해야하는데 Global로 AWS 또는 K8s 환경 설정을 하면 귀찮아지기 때문에 폴더별로 모든 환경을 관리하고 싶어졌다.
Direnv를 활용하면 directory마다 환경을 따로 관리할 수 있는데, 매번 같은 키를 넣고 관리하기도 귀찮아서 Direnv에서 사용하는 변수들도 따로 관리하고 있다. 다음은 현재 사용하는 패턴이다.
Direnv 설치하기 다음은 참고한 문서이다.
direnv로 디렉토리(프로젝트) 별 개발환경 구축하기
AWS 설정 옮겨가며 편하게 사용하기 AWS CLI를 계정별로 관리하고 싶을 때 profile 옵션을 사용한다.">
<meta name=author content>
<link rel=canonical href=https://novemberde.github.io/post/2019/10/04/Direnv/>
<link crossorigin=anonymous href=/assets/css/stylesheet.min.9f1d947375927e9847272b1f4e9be81336f539e513bf04d52cade31f81cad1af.css integrity="sha256-nx2Uc3WSfphHJysfTpvoEzb1OeUTvwTVLK3jH4HK0a8=" rel="preload stylesheet" as=style>
<script defer crossorigin=anonymous src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://novemberde.github.io/favicon.ico>
<link rel=icon type=image/png sizes=16x16 href=https://novemberde.github.io/favicon-16x16.png>
<link rel=icon type=image/png sizes=32x32 href=https://novemberde.github.io/favicon-32x32.png>
<link rel=apple-touch-icon href=https://novemberde.github.io/apple-touch-icon.png>
<link rel=mask-icon href=https://novemberde.github.io/safari-pinned-tab.svg>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<meta name=generator content="Hugo 0.88.1">
<noscript>
<style>#theme-toggle,.top-link{display:none}</style>
<style>@media(prefers-color-scheme:dark){:root{--theme:#1d1e20;--entry:#2e2e33;--primary:rgba(255, 255, 255, 0.84);--secondary:rgba(255, 255, 255, 0.56);--tertiary:rgba(255, 255, 255, 0.16);--content:rgba(255, 255, 255, 0.74);--hljs-bg:#2e2e33;--code-bg:#37383e;--border:#333}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style>
</noscript>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-97433460-1','auto'),ga('send','pageview'))</script><meta property="og:title" content="Direnv를 활용한 프로젝트 별 환경설정하기">
<meta property="og:description" content="현재 Amazon EKS위에 컨테이너를 배포하기 위한 환경을 구축중이다. 각 운영되는 서비스 또는 Repository마다 환경들이 다르고, 개인으로 운영하는 서비스도 가끔 확인해야하는데 Global로 AWS 또는 K8s 환경 설정을 하면 귀찮아지기 때문에 폴더별로 모든 환경을 관리하고 싶어졌다.
Direnv를 활용하면 directory마다 환경을 따로 관리할 수 있는데, 매번 같은 키를 넣고 관리하기도 귀찮아서 Direnv에서 사용하는 변수들도 따로 관리하고 있다. 다음은 현재 사용하는 패턴이다.
Direnv 설치하기 다음은 참고한 문서이다.
direnv로 디렉토리(프로젝트) 별 개발환경 구축하기
AWS 설정 옮겨가며 편하게 사용하기 AWS CLI를 계정별로 관리하고 싶을 때 profile 옵션을 사용한다.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://novemberde.github.io/post/2019/10/04/Direnv/"><meta property="article:section" content="post">
<meta property="article:published_time" content="2019-10-04T11:30:03+00:00">
<meta property="article:modified_time" content="2019-10-04T11:30:03+00:00"><meta property="og:site_name" content="Novemberde dev logs">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Direnv를 활용한 프로젝트 별 환경설정하기">
<meta name=twitter:description content="현재 Amazon EKS위에 컨테이너를 배포하기 위한 환경을 구축중이다. 각 운영되는 서비스 또는 Repository마다 환경들이 다르고, 개인으로 운영하는 서비스도 가끔 확인해야하는데 Global로 AWS 또는 K8s 환경 설정을 하면 귀찮아지기 때문에 폴더별로 모든 환경을 관리하고 싶어졌다.
Direnv를 활용하면 directory마다 환경을 따로 관리할 수 있는데, 매번 같은 키를 넣고 관리하기도 귀찮아서 Direnv에서 사용하는 변수들도 따로 관리하고 있다. 다음은 현재 사용하는 패턴이다.
Direnv 설치하기 다음은 참고한 문서이다.
direnv로 디렉토리(프로젝트) 별 개발환경 구축하기
AWS 설정 옮겨가며 편하게 사용하기 AWS CLI를 계정별로 관리하고 싶을 때 profile 옵션을 사용한다.">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://novemberde.github.io/post/"},{"@type":"ListItem","position":2,"name":"Direnv를 활용한 프로젝트 별 환경설정하기","item":"https://novemberde.github.io/post/2019/10/04/Direnv/"}]}</script>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Direnv를 활용한 프로젝트 별 환경설정하기","name":"Direnv를 활용한 프로젝트 별 환경설정하기","description":"현재 Amazon EKS위에 컨테이너를 배포하기 위한 환경을 구축중이다. 각 운영되는 서비스 또는 Repository마다 환경들이 다르고, 개인으로 운영하는 서비스도 가끔 확인해야하는데 Global로 AWS 또는 K8s 환경 설정을 하면 귀찮아지기 때문에 폴더별로 모든 환경을 관리하고 싶어졌다.\nDirenv를 활용하면 directory마다 환경을 따로 관리할 수 있는데, 매번 같은 키를 넣고 관리하기도 귀찮아서 Direnv에서 사용하는 변수들도 따로 관리하고 있다. 다음은 현재 사용하는 패턴이다.\nDirenv 설치하기 다음은 참고한 문서이다.\ndirenv로 디렉토리(프로젝트) 별 개발환경 구축하기\nAWS 설정 옮겨가며 편하게 사용하기 AWS CLI를 계정별로 관리하고 싶을 때 profile 옵션을 사용한다.","keywords":["direnv","환경설정","environment","env","설정","project"],"articleBody":"현재 Amazon EKS위에 컨테이너를 배포하기 위한 환경을 구축중이다. 각 운영되는 서비스 또는 Repository마다 환경들이 다르고, 개인으로 운영하는 서비스도 가끔 확인해야하는데 Global로 AWS 또는 K8s 환경 설정을 하면 귀찮아지기 때문에 폴더별로 모든 환경을 관리하고 싶어졌다.\nDirenv를 활용하면 directory마다 환경을 따로 관리할 수 있는데, 매번 같은 키를 넣고 관리하기도 귀찮아서 Direnv에서 사용하는 변수들도 따로 관리하고 있다. 다음은 현재 사용하는 패턴이다.\nDirenv 설치하기 다음은 참고한 문서이다.\ndirenv로 디렉토리(프로젝트) 별 개발환경 구축하기\nAWS 설정 옮겨가며 편하게 사용하기 AWS CLI를 계정별로 관리하고 싶을 때 profile 옵션을 사용한다. 하지만 이는 매번 profile을 입력해야하는 번거로움이 있다. 위에 링크를 잘 살펴보면 “전역 설정 파일 .direnvrc\"를 찾을 수 있다. 이걸 잘 활용하면 간편하게 디렉터리별 환경 설정을 한 곳에서 관리할 수 있다.\n아래는 내가 사용하는 기본적인 .direnvrc 파일이다.\nuse_ruby() { local ruby_root=$HOME/.rubies/$1 load_prefix \"$ruby_root\" layout_ruby } company_aws() { export AWS_ACCESS_KEY_ID=~~~ export AWS_SECRET_ACCESS_KEY=~~~ } my_private_aws() { export AWS_ACCESS_KEY_ID=~~~ export AWS_SECRET_ACCESS_KEY=~~~~ echo \"load my_private_aws\" } 이렇게 설정해 놓으면 다음부턴 해당 프로젝트 디렉토리에 .envrc 파일에서 다음과 같이 입력하면 해당 환경변수를 불러온다.\nmy_private_aws 위와같이 저장하고 다시 direnv allow를 해준다.\n$ direnv allow direnv: loading .envrc load my_private_aws direnv: export +AWS_ACCESS_KEY_ID +AWS_SECRET_ACCESS_KEY 간단하게 프로젝트 디렉터리 마다 설정을 불러올 수 있다.\nKubeconfig 따로 관리하기 Kubeconfig는 성격이 달라서 필요한 경우에만 주입해주는게 낫다. .direnvrc 포함시키는 건 전체적으로 설정되기 때문에 실수할 가능성이 많이 생긴다. 귀찮더라도 스테이징마다 kubeconfig를 설정하는데 관리하는 방식은 다음과 같다.\n$ tree -L 2 ~/.kube ├── cache │ └── discovery ├── my_private_cluster.yaml └── company_alpha_cluster.yaml 개발이 진행중인 프로젝트 디렉토리에서 다음과 같이 설정한다.\nexport KUBECONFIG=~/.kube/my_private_cluster.yaml 스테이징마다 별도로 디렉터리 구조를 잡고 있다면 클러스터에 잘못 배포되는 실수를 방지할 수 있다.\nReferences  https://www.44bits.io/ko/post/direnv_for_managing_directory_environment  ","wordCount":"251","inLanguage":"en","datePublished":"2019-10-04T11:30:03Z","dateModified":"2019-10-04T11:30:03Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://novemberde.github.io/post/2019/10/04/Direnv/"},"publisher":{"@type":"Organization","name":"Novemberde's Blog","logo":{"@type":"ImageObject","url":"https://novemberde.github.io/favicon.ico"}}}</script>
</head>
<body id=top>
<script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script>
<header class=header>
<nav class=nav>
<div class=logo>
<a href=https://novemberde.github.io/ accesskey=h title="Novemberde's Blog (Alt + H)">Novemberde's Blog</a>
<span class=logo-switches>
<button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</button>
</span>
</div>
<ul id=menu>
<li>
<a href=https://novemberde.github.io/search title="Search (Alt + /)" accesskey=/>
<span>Search</span>
</a>
</li>
<li>
<a href=https://novemberde.github.io/post/ title=Post>
<span>Post</span>
</a>
</li>
<li>
<a href=https://novemberde.github.io/about title=About>
<span>About</span>
</a>
</li>
</ul>
</nav>
</header>
<main class=main>
<article class=post-single>
<header class=post-header>
<div class=breadcrumbs><a href=https://novemberde.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://novemberde.github.io/post/>Posts</a></div>
<h1 class=post-title>
Direnv를 활용한 프로젝트 별 환경설정하기
</h1>
<div class=post-meta>October 4, 2019&nbsp;·&nbsp;2 min
</div>
</header>
<div class=post-content><p>현재 Amazon EKS위에 컨테이너를 배포하기 위한 환경을 구축중이다.
각 운영되는 서비스 또는 Repository마다 환경들이 다르고,
개인으로 운영하는 서비스도 가끔 확인해야하는데 Global로 AWS 또는 K8s 환경 설정을 하면
귀찮아지기 때문에 폴더별로 모든 환경을 관리하고 싶어졌다.</p>
<p>Direnv를 활용하면 directory마다 환경을 따로 관리할 수 있는데, 매번 같은 키를 넣고 관리하기도 귀찮아서
Direnv에서 사용하는 변수들도 따로 관리하고 있다.
다음은 현재 사용하는 패턴이다.</p>
<h2 id=direnv-설치하기>Direnv 설치하기<a hidden class=anchor aria-hidden=true href=#direnv-설치하기>#</a></h2>
<p>다음은 참고한 문서이다.</p>
<p><a href=https://www.44bits.io/ko/post/direnv_for_managing_directory_environment>direnv로 디렉토리(프로젝트) 별 개발환경 구축하기</a></p>
<h2 id=aws-설정-옮겨가며-편하게-사용하기>AWS 설정 옮겨가며 편하게 사용하기<a hidden class=anchor aria-hidden=true href=#aws-설정-옮겨가며-편하게-사용하기>#</a></h2>
<p>AWS CLI를 계정별로 관리하고 싶을 때 profile 옵션을 사용한다. 하지만 이는 매번 profile을 입력해야하는 번거로움이 있다.
위에 링크를 잘 살펴보면 &ldquo;전역 설정 파일 .direnvrc"를 찾을 수 있다. 이걸 잘 활용하면 간편하게 디렉터리별 환경 설정을 한 곳에서 관리할 수 있다.</p>
<p>아래는 내가 사용하는 기본적인 .direnvrc 파일이다.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>use_ruby<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
  local ruby_root<span style=color:#f92672>=</span>$HOME/.rubies/$1
  load_prefix <span style=color:#e6db74>&#34;</span>$ruby_root<span style=color:#e6db74>&#34;</span>
  layout_ruby
<span style=color:#f92672>}</span>

company_aws<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
  export AWS_ACCESS_KEY_ID<span style=color:#f92672>=</span>~~~
  export AWS_SECRET_ACCESS_KEY<span style=color:#f92672>=</span>~~~
<span style=color:#f92672>}</span>
my_private_aws<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
  export AWS_ACCESS_KEY_ID<span style=color:#f92672>=</span>~~~
  export AWS_SECRET_ACCESS_KEY<span style=color:#f92672>=</span>~~~~
  echo <span style=color:#e6db74>&#34;load my_private_aws&#34;</span>
<span style=color:#f92672>}</span>
</code></pre></div><p>이렇게 설정해 놓으면 다음부턴 해당 프로젝트 디렉토리에 .envrc 파일에서 다음과 같이 입력하면 해당 환경변수를 불러온다.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>my_private_aws
</code></pre></div><p>위와같이 저장하고 다시 direnv allow를 해준다.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>$ direnv allow
direnv: loading .envrc
load my_private_aws
direnv: export +AWS_ACCESS_KEY_ID +AWS_SECRET_ACCESS_KEY
</code></pre></div><p>간단하게 프로젝트 디렉터리 마다 설정을 불러올 수 있다.</p>
<h2 id=kubeconfig-따로-관리하기>Kubeconfig 따로 관리하기<a hidden class=anchor aria-hidden=true href=#kubeconfig-따로-관리하기>#</a></h2>
<p>Kubeconfig는 성격이 달라서 필요한 경우에만 주입해주는게 낫다.
.direnvrc 포함시키는 건 전체적으로 설정되기 때문에 실수할 가능성이 많이 생긴다.
귀찮더라도 스테이징마다 kubeconfig를 설정하는데 관리하는 방식은 다음과 같다.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>$ tree -L <span style=color:#ae81ff>2</span> ~/.kube
├── cache
│   └── discovery
├── my_private_cluster.yaml
└── company_alpha_cluster.yaml
</code></pre></div><p>개발이 진행중인 프로젝트 디렉토리에서 다음과 같이 설정한다.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>export KUBECONFIG<span style=color:#f92672>=</span>~/.kube/my_private_cluster.yaml
</code></pre></div><p>스테이징마다 별도로 디렉터리 구조를 잡고 있다면 클러스터에 잘못 배포되는 실수를 방지할 수 있다.</p>
<h2 id=references>References<a hidden class=anchor aria-hidden=true href=#references>#</a></h2>
<ul>
<li><a href=https://www.44bits.io/ko/post/direnv_for_managing_directory_environment>https://www.44bits.io/ko/post/direnv_for_managing_directory_environment</a></li>
</ul>
</div>
<footer class=post-footer>
<ul class=post-tags>
<li><a href=https://novemberde.github.io/tags/direnv/>direnv</a></li>
<li><a href=https://novemberde.github.io/tags/%ED%99%98%EA%B2%BD%EC%84%A4%EC%A0%95/>환경설정</a></li>
<li><a href=https://novemberde.github.io/tags/environment/>environment</a></li>
<li><a href=https://novemberde.github.io/tags/env/>env</a></li>
<li><a href=https://novemberde.github.io/tags/%EC%84%A4%EC%A0%95/>설정</a></li>
<li><a href=https://novemberde.github.io/tags/project/>project</a></li>
</ul>
<nav class=paginav>
<a class=prev href=https://novemberde.github.io/post/2019/10/11/Svelte-revealjs/>
<span class=title>« Prev Page</span>
<br>
<span>Let's start SVELTE, goodbye React & Vue</span>
</a>
<a class=next href=https://novemberde.github.io/post/2019/06/10/MySQL-Desgin-cheatsheet/>
<span class=title>Next Page »</span>
<br>
<span>MySQL에서 DB스키마 작성시 주의할 점들</span>
</a>
</nav>
</footer>
<div id=disqus_thread></div>
<script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return}var b=document,a=b.createElement('script');a.async=!0,a.src='//novemberde-github-io.disqus.com/embed.js',a.setAttribute('data-timestamp',+new Date),(b.head||b.body).appendChild(a)})()</script>
<noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript>
<a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a>
</article>
</main>
<footer class=footer>
<span>&copy; 2021 <a href=https://novemberde.github.io/>Novemberde's Blog</a></span>
<span>
Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a>
</span>
</footer>
<a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a>
<script>let menu=document.getElementById('menu');menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script>
<script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script>
<script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script>
<script async src=//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script>
<script>(adsbygoogle=window.adsbygoogle||[]).push({google_ad_client:"ca-pub-8620431066400094",enable_page_level_ads:!0})</script></body>
</html>